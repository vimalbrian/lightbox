var opacity_out=1,opacity_over=.3,bg_color="#444444",fadeIn_speed=500,slideDown_speed=300,image_href="",image_title="",image_total=0,image_curr=0,curr_elem="",prev_width=$(window).width(),prev_height=$(window).height();!function(i){function t(){i("#lightbox_content").hide(),i("#lightbox_preloader").show(),i("#lightbox_content").css("background-color",""),i("#lightbox_image").load(function(){},function(){i("#lightbox_preloader").hide(),c(),i("#lightbox_content").css("background-color",bg_color),i("#lightbox_content").css("margin-top",i(window).height()/2-i("#lightbox_content").height()/2-30+"px"),i("#lightbox_content").fadeIn(fadeIn_speed,function(){i("#lightbox_content .caption").slideDown(slideDown_speed)})}),i("body").bind("keydown",function(t){i("#lightbox_preloader").hide(),t.stopImmediatePropagation(),39==t.which?o():37==t.which&&e()})}function e(){curr_elem=curr_elem.prev().length?curr_elem.prev():curr_elem.parent().children(":last-child"),n()}function o(){curr_elem=curr_elem.next().length?curr_elem.next():curr_elem.parent().children(":first-child"),n()}function n(){image_href=curr_elem.children().attr("href"),image_title=curr_elem.children().attr("title"),image_curr=curr_elem.index()+1,i("#lightbox_content").html('<img id="lightbox_image" src="'+image_href+'" /></div><div class="caption"><p><b>'+image_title+'</b></p><p class="img_num">Images '+image_curr+" of "+image_total+"</p></div>"),i("#lightbox").fadeIn(fadeIn_speed),t()}function c(){}i.fn.lightbox=function(){var r=i(this);r.find("a").hover(function(){r.find("img").css({opacity:opacity_over,filter:"alpha(opacity="+100*opacity_over+")"}),i(this).children().css({opacity:opacity_out,filter:"alpha(opacity="+100*opacity_out+")"})},function(){r.find("img").css({opacity:opacity_out,filter:opacity_out})}),r.find("a").click(function(e){if(e.preventDefault(),curr_elem=i(this).parent(),image_href=i(this).attr("href"),image_title=i(this).attr("title"),image_total=i(this).parent().parent().children().length,image_curr=i(this).parent().index()+1,i("#lightbox").length>0)n();else{var o='<div id="lightbox"><div id="lightbox_content"><img id="lightbox_image" src="'+image_href+'" /><div class="caption"><p><b>'+image_title+'</b></p><p class="img_num">Images '+image_curr+" of "+image_total+'</p></div></div><div id="close_btn"><img src="assets/images/close_button.png"/></div><div id="prev_btn"><img src="assets/images/prev_btn.png"/></div><div id="next_btn"><img src="assets/images/next_btn.png"/></div><div id="lightbox_preloader"><img src="assets/images/preloader.gif"/></div></div>';i("#lightbox_content").hide(),i("body").append(o),t()}}),i("body").on("click","#lightbox_content, #lightbox_nav",function(){return!1}),i("body").on("click","#prev_btn",function(i){i.stopPropagation(),e()}),i("body").on("click","#next_btn",function(i){i.stopPropagation(),o()}),i("body").on("click","#lightbox, #close_btn",function(){i("#lightbox").hide(),i("#lightbox_preloader").hide(),i("body").unbind("keydown")}),i(window).resize(function(){c(),i("#lightbox_content").css("margin-top",i(window).height()/2-i("#lightbox_content").height()/2+"px")})}}(jQuery);